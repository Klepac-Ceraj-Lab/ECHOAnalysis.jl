<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Dealing with Metadata · ECHO RESONANCE Microbiome Paper 1</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">ECHO RESONANCE Microbiome Paper 1</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Getting Started</a></li><li><a class="tocitem" href="../samples/">Timepoints and Samples</a></li><li class="is-active"><a class="tocitem" href>Dealing with Metadata</a><ul class="internal"><li><a class="tocitem" href="#Functions-1"><span>Functions</span></a></li><li><a class="tocitem" href="#Index-1"><span>Index</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Dealing with Metadata</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Dealing with Metadata</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Klepac-Ceraj-Lab/echo_analysis/blob/master/docs/src/metadata_handling.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Subject-and-Sample-Metadata-1"><a class="docs-heading-anchor" href="#Subject-and-Sample-Metadata-1">Subject and Sample Metadata</a><a class="docs-heading-anchor-permalink" href="#Subject-and-Sample-Metadata-1" title="Permalink"></a></h1><ul><li><a href="#Subject-and-Sample-Metadata-1">Subject and Sample Metadata</a></li><ul><li><a href="#Functions-1">Functions</a></li><li><a href="#Index-1">Index</a></li></ul></ul><h2 id="Functions-1"><a class="docs-heading-anchor" href="#Functions-1">Functions</a><a class="docs-heading-anchor-permalink" href="#Functions-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="ECHOAnalysis.breastfeeding-Tuple{DataFrames.DataFrameRow}" href="#ECHOAnalysis.breastfeeding-Tuple{DataFrames.DataFrameRow}"><code>ECHOAnalysis.breastfeeding</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">breastfeeding(row::DataFrameRow)</code></pre><p>Checks a wide-form metadata row for breastfeeding information. Possible return values are</p><ul><li><code>:breastfed</code>: at least 3 months exlussively breastfed,   or where at least 80% of feedings are from breast</li><li><code>:formulafed</code>: no breastmilk after 2 weeks</li><li><code>:mixed</code>: all others</li><li><code>missing</code>: not enough information</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Klepac-Ceraj-Lab/echo_analysis/blob/0108e063f4a4b7cfbcc8f4fe3d8bc0e89eadc832/src/metadata_handling.jl#L27-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ECHOAnalysis.numberify-Tuple{Any}" href="#ECHOAnalysis.numberify-Tuple{Any}"><code>ECHOAnalysis.numberify</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">numberify(x)
numberify(v::AbstractArray)</code></pre><p>Try to convert something into a number or array of numbers using the heuristics:</p><ul><li>if x is already a number or is <code>missing</code>, return x</li><li>if v is already an array of numbers, return v</li><li>if x is a <code>String</code>:<ul><li>if x contains a <code>.</code> or <code>e</code>, parse as a <code>Float64</code></li><li>Otherwise parse as an Int</li></ul></li><li>if numberified vector contains any <code>Float</code>s, return a vector of <code>missing</code> and <code>Float64</code></li><li>if x is anything other than a String or a number, return <code>missing</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Klepac-Ceraj-Lab/echo_analysis/blob/0108e063f4a4b7cfbcc8f4fe3d8bc0e89eadc832/src/metadata_handling.jl#L54-L66">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ECHOAnalysis.uniquesubjects-Tuple{AbstractArray{#s37,1} where #s37&lt;:StoolSample}" href="#ECHOAnalysis.uniquesubjects-Tuple{AbstractArray{#s37,1} where #s37&lt;:StoolSample}"><code>ECHOAnalysis.uniquesubjects</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">uniquesubjects(samples::AbstractVector{&lt;:AbstractTimepoint};
                            samplefilter=x-&gt;true, sortfirst=true)
uniquesubjects(samples::AbstractVector{&lt;:StoolSample};
                    skipethanol=true, samplefilter=x-&gt;true, sortfirst=true)</code></pre><p>Returns a single sample per subject from a vector of [<code>AbstractTimepoint</code>]@ref.</p><p><strong>Example:</strong></p><p>Given the following array of 4 samples:</p><pre><code class="language-">s = stoolsample([&quot;C0001_1F_1A&quot;, &quot;C0001_1F_2A&quot;, &quot;C0001_2F_1A&quot;, &quot;C0002_1F_1A&quot;])</code></pre><p>The second and third samples will be excluded, since they are both from the same subject as the first sample. If a single sample for each subject/timepoint pair is desired, use [<code>uniquetimepoints</code>]@ref</p><p><strong>Other parameters</strong></p><ul><li><code>skipethanol=true</code>: exlude samples that match the pattern <code>_\dE_</code>,   that is ethanol (as opposed to genotek) samples.</li><li><code>samplefilter=x-&gt;true</code>: a function to select samples to include. By default, all samples are included. Use <code>samplefilter=iskid</code> to include only child samples for example.</li><li><code>sortfirst=true</code>: if <code>true</code>, sorts the vector (to pick the earliest timepoint of each subject)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Klepac-Ceraj-Lab/echo_analysis/blob/0108e063f4a4b7cfbcc8f4fe3d8bc0e89eadc832/src/metadata_handling.jl#L417-L447">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ECHOAnalysis.uniquetimepoints-Tuple{AbstractArray{#s37,1} where #s37&lt;:StoolSample}" href="#ECHOAnalysis.uniquetimepoints-Tuple{AbstractArray{#s37,1} where #s37&lt;:StoolSample}"><code>ECHOAnalysis.uniquetimepoints</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">uniquetimepoints(samples::AbstractVector{&lt;:AbstractTimepoint};
                    samplefilter=x-&gt;true,
                    sortfirst=true,
                    takefirst=true)
uniquetimepoints(samples::AbstractVector{&lt;:StoolSample};
                    skipethanol=true,
                    samplefilter=x-&gt;true,
                    sortfirst=true,
                    takefirst=true)</code></pre><p>Identifies unique timepoints (that is, <code>subject=&gt;timepoint</code> pairs) from a vector of [<code>AbstractTimepoint</code>]@ref.</p><p><strong>Example:</strong></p><p>Given the following array of 4 samples:</p><pre><code class="language-">s = stoolsample([&quot;C0001_1F_1A&quot;, &quot;C0001_1F_2A&quot;, &quot;C0001_2F_1A&quot;, &quot;C0002_1F_1A&quot;])</code></pre><p>The second item will be excluded, since it&#39;s a duplicate of the first. If a single sample for each subject is desired, use [<code>uniquesubjects</code>]@ref</p><p><strong>Other parameters</strong></p><ul><li><code>skipethanol=true</code>: exlude samples that match the pattern <code>_\dE_</code>,   that is ethanol (as opposed to genotek) samples.</li><li><code>samplefilter=x-&gt;true</code>: a function to select samples to include. By default, all samples are included. Use <code>samplefilter=iskid</code> to include only child samples for example.</li><li><code>sortfirst=true</code>: if <code>true</code>, sorts the vector at the beginning</li><li><code>takefirst=false</code>: if <code>true</code>, only takes 1 timepoint for each subject.   Use with <code>sortfirst</code> to get only the first timepoint.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Klepac-Ceraj-Lab/echo_analysis/blob/0108e063f4a4b7cfbcc8f4fe3d8bc0e89eadc832/src/metadata_handling.jl#L356-L391">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ECHOAnalysis.widemetadata-Tuple{DataFrames.AbstractDataFrame,Array{#s34,1} where #s34&lt;:StoolSample}" href="#ECHOAnalysis.widemetadata-Tuple{DataFrames.AbstractDataFrame,Array{#s34,1} where #s34&lt;:StoolSample}"><code>ECHOAnalysis.widemetadata</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">widemetadata(longdf::AbstractDataFrame, samples::Vector{&lt;:StoolSample};
                    metadata::Set=Set(unique(longdf.metadatum)),
                    parents::Set=Set(unique(longdf.parent_table)))
widemetadata(longdf::AbstractDataFrame, samples::Vector{&lt;:AbstractString}; kwargs...)
widemetadata(db::SQLite.DB, tablename, samples; kwargs...)</code></pre><p>Convert data in a long-form metadata table into wide-form, where each sample is given a single row and each metadatum a single column.</p><p>Timepoint-specific metadata (specifically, metadata that comes from a parent table that has a <code>timepoint</code> field) is only associated with samples from that timepoint, while others (eg. childGender) are associated with every sample for a given subject.</p><p>Optional:     - Pass vector of Parent Tables to include     - Pass vector of metadatum fields to include</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Klepac-Ceraj-Lab/echo_analysis/blob/0108e063f4a4b7cfbcc8f4fe3d8bc0e89eadc832/src/metadata_handling.jl#L273-L293">source</a></section></article><h2 id="Index-1"><a class="docs-heading-anchor" href="#Index-1">Index</a><a class="docs-heading-anchor-permalink" href="#Index-1" title="Permalink"></a></h2><ul><li><a href="../samples/#ECHOAnalysis.AbstractTimepoint"><code>ECHOAnalysis.AbstractTimepoint</code></a></li><li><a href="../samples/#ECHOAnalysis.StoolSample"><code>ECHOAnalysis.StoolSample</code></a></li><li><a href="#ECHOAnalysis.breastfeeding-Tuple{DataFrames.DataFrameRow}"><code>ECHOAnalysis.breastfeeding</code></a></li><li><a href="#ECHOAnalysis.numberify-Tuple{Any}"><code>ECHOAnalysis.numberify</code></a></li><li><a href="../samples/#ECHOAnalysis.resolve_letter_timepoint-Tuple{AbstractString}"><code>ECHOAnalysis.resolve_letter_timepoint</code></a></li><li><a href="../samples/#ECHOAnalysis.stoolsample-Tuple{String}"><code>ECHOAnalysis.stoolsample</code></a></li><li><a href="#ECHOAnalysis.uniquesubjects-Tuple{AbstractArray{#s37,1} where #s37&lt;:StoolSample}"><code>ECHOAnalysis.uniquesubjects</code></a></li><li><a href="#ECHOAnalysis.uniquetimepoints-Tuple{AbstractArray{#s37,1} where #s37&lt;:StoolSample}"><code>ECHOAnalysis.uniquetimepoints</code></a></li><li><a href="#ECHOAnalysis.widemetadata-Tuple{DataFrames.AbstractDataFrame,Array{#s34,1} where #s34&lt;:StoolSample}"><code>ECHOAnalysis.widemetadata</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../samples/">« Timepoints and Samples</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 31 January 2020 15:35">Friday 31 January 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
